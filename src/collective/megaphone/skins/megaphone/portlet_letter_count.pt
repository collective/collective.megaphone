<tal:block metal:define-macro="portlet">
<dl class="portlet" id="portlet-letter-count"
    tal:define="sda python:getattr(context, 'saved-letters', None);"
    tal:condition="python:sda and context.portal_membership.checkPermission('PloneFormGen: Download Saved Input', context)">

    <dt class="portletHeader">
        <span class="portletTopLeft"></span>
        Letters Sent
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd"
        tal:define="letter_count python:len(sda.getSavedFormInput())">
        <p tal:content="string:${letter_count} letters have been sent.">
            5 letters have been sent.
        </p>
        
        <p tal:condition="letter_count">
            <a tal:attributes="href sda/absolute_url">View letters</a>
        </p>
    </dd>

    <dd class="portletFooter">
        <span class="portletBottomLeft"></span>
        <span class="portletBottomRight"></span>
    </dd>

</dl>
</tal:block>